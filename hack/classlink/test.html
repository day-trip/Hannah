<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Learnosity SDK - NodeJS</title>
    <script>
        const console = window.console || {log: function () {}, error: function () {}};
        class LearnosityItems {
            private _internal: any = {};
            private version: string = "v1.120.3"
            private versions: Record<string, string> = {requested: "latest-lts", mapped: "v1.120", concrete: "v1.120.3", server: "latest-lts", assets: "v1.120.3"};
            private errors: any[] = [];
            private r: string[] = ["primeOffline", "needsPushing", "push", "offline"];

            constructor() {
                this._internal.instanceCachedMethodCalls = [];
                this._internal.instanceMethodsToCache = ["on", "off", "once", "reset"];

                this._internal.getDirectionProperty = () => {
                    let r = document.querySelector("script[data-lrn-dir]");
                    r = r ? r.dataset.lrnDir : null;
                    return r && -1 !== ["ltr", "rtl", "ltr-rtl", "rtl-ltr"].indexOf(r) ? r : null;
                }

                this._internal.config = {apiHost: "https://items.learnosity.com/" + this.versions.server, assetsHost: "https://items.learnosity.com/" + this.versions.assets, assessApiPath: "https://assess.learnosity.com/", questionsApiPath: "https://api-vthis.learnosity.com/", questionsApiV2Path: "https://questions.learnosity.com/", eventsApiPath: "https://events.learnosity.com", eventsPublicTopicName: "items_public", annotationsApiPath: "https://annotations.learnosity.com/", devEnvironment: "1" === ("false" = "false".slice(0)) || false, itemsRequestedVersion: this.versions.requested, assessApiVersion: 0 !== "latest-lts".indexOf("{:") ? "latest-lts" : null, questionsApiVersion: 0 !== "latest-lts".indexOf("{:") ? "latest-lts" : null, eventsApiVersion: 0 !== "latest-lts".indexOf("{:") ? "latest-lts" : null, annotationsApiVersion: 0 !== "latest-lts".indexOf("{:") ? "latest-lts" : null, sharedLibUrl: "https://shared.learnosity.com", appContext: "Items API", textDirection: this._internal.getDirectionProperty(), rollbarEnabled: "1" === ("1" = "1".slice(0)) || false, rollbarJsUrl: "https://shared.learnosity.com/vendor/rollbar.min.js"};

                this._internal.addScriptToDom = (r: string) => {
                    const e = document.createElement("script"), n = document.getElementsByTagName("head")[0];
                    this._internal.config.devEnvironment && -1 === r.indexOf("?") && (r += "?bust=" + (new Date).getTime());
                    e.src = r;
                    e.onerror = () => {
                        this._internal.apiLoadingFailed = {code: 50014, msg: "Failed loading Items API, can't load required modules", detail: "Couldn't load " + r}, this._internal._cachedInitCalls && this._internal.onScriptLoadError();
                    };
                    n.appendChild(e);
                }

                this._internal.onScriptLoadError = function () {
                    var r, e, n = this._internal._cachedInitCalls && this._internal._cachedInitCalls[0] && this._internal._cachedInitCalls[0].args;
                    if (n) for (var t = n.length - 1; 0 <= t && !r; t--) "[object Function]" === Object.prototype.toString.call(n[t].errorListener) && (r = n[t].errorListener);
                    e = this._internal.apiLoadingFailed, this.errors = [e], console.error(e.code + ": " + e.msg + ". View this error on LearnosityItems.errors[0]"), r ? r(e) : window.alert(e.msg + "\n\nPlease contact your administrator if you require further assistance.");
                }

                for (var n = 0; n < r.length; n++) !function (r) {
                    a[r] =  () => {
                        this._internal._cachedMethodCalls || (this._internal._cachedMethodCalls = []), this._internal._cachedMethodCalls.push({method: r, args: Array.prototype.slice.call(arguments)});
                    };
                }(r[n]);

                const o = this._internal.config;
                o.rollbarEnabled && (this._internal.rollbarInstance = t(o, this.version, "a683ed67fa2e4f3bbf784f33b01d6d23")), this._internal.addScriptToDom(o.assetsHost + "/dist/api.js");
            }

            public init (...arguments: any[]) {
                this._internal._cachedInitCalls || (this._internal._cachedInitCalls = []);
                for (var r = {}, e = Array.prototype.slice.call(arguments), n = (e.push({appStub: r}), this._internal._cachedInitCalls.push({args: e}), r), t = this._internal.instanceMethodsToCache, o = 0; o < t.length; o++) n[t[o]] = function (r) {
                    return () => {
                        this._internal.instanceCachedMethodCalls.push({method: r, appStub: n, args: Array.prototype.slice.call(arguments)});
                    };
                }(t[o]);
                this._internal.apiLoadingFailed && this._internal.onScriptLoadError();
                return r;
            };

            private t(t, r, e) {
                let a, n, o;

                function i(r) {
                    var e;
                    return (o[r] || (e = o[r] = {exports: {}, id: r, loaded: false}, n[r].call(e.exports, e, e.exports, i), e.loaded = true, e)).exports;
                }
                return window.rollbar || (a = {enabled: false, rollbarJsUrl: t.rollbarJsUrl}, n = [function (r, e, n) {
                    "use strict";
                    var t = n(1), n = n(4), o = ((a = a || {}).rollbarJsUrl = this.rollbarJsUrl || "https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.4.6/rollbar.min.js", this.async = void 0 === this.async || this.async, t.setupShim(window, a)), n = n(a);
                    window.rollbar = t.Rollbar, o.loadFull(window, document, !this.async, a, n);
                }, function (r, e, n) {
                    "use strict";
                    function a(r) {
                        return function () {
                            try {
                                return r.apply(this, arguments);
                            } catch (r) {
                                try {
                                    console.error("[Rollbar]: Internal error", r);
                                } catch (r) {}
                            }
                        };
                    }
                    function t(r, e) {
                        this.options = r, this._rollbarOldOnError = null;
                        var n = o++;
                        this.shimId = function () {
                            return n;
                        }, "undefined" != typeof window && window._rollbarShims && (window._rollbarShims[n] = {handler: e, messages: []});
                    }
                    var i = n(2), o = 0, l = n(3), s = function (r, e) {
                        return new t(r, e);
                    }, c = function (r) {
                        return new l(s, r);
                    };
                    t.prototype.loadFull = function (i, r, e, n, l) {
                        var s = false, c = r.createElement("script"), r = r.getElementsByTagName("script")[0], d = r.parentNode;
                        c.crossOrigin = "", c.src = n.rollbarJsUrl, e || (c.async = true), c.onload = c.onreadystatechange = a(function () {
                            if (!(s || this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState)) {
                                c.onload = c.onreadystatechange = null;
                                try {
                                    d.removeChild(c);
                                } catch (r) {}
                                if (s = true, void 0 === i._rollbarDidLoad) for (var r, e, n, t, o = new Error("rollbar.js did not load"), a = 0; r = i._rollbarShims[a++];) for (r = r.messages || []; e = r.shift();) for (n = e.args || [], a = 0; a < n.length; ++a) if ("function" == typeof (t = n[a])) {
                                    t(o);
                                    break;
                                }
                                "function" == typeof l && l(o);
                            }
                        }), d.insertBefore(c, r);
                    }, t.prototype.wrap = function (n, r, t) {
                        try {
                            var o = "function" == typeof r ? r : function () {
                                return r || {};
                            };
                            if ("function" != typeof n) return n;
                            if (n._isWrap) return n;
                            if (!n._rollbar_wrapped && (n._rollbar_wrapped = function () {
                                t && "function" == typeof t && t.apply(this, arguments);
                                try {
                                    return n.apply(this, arguments);
                                } catch (r) {
                                    var e = r;
                                    throw e && ((e = "string" == typeof e ? String(e) : e)._rollbarContext = o() || {}, e._rollbarContext._wrappedSource = n.toString(), window._rollbarWrappedError = e), e;
                                }
                            }, n._rollbar_wrapped._isWrap = true, n.hasOwnProperty)) for (var e in n) n.hasOwnProperty(e) && (n._rollbar_wrapped[e] = n[e]);
                            return n._rollbar_wrapped;
                        } catch (r) {
                            return n;
                        }
                    };
                    for (var d = "log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","), p = 0; p < d.length; ++p) t.prototype[d[p]] = function (e) {
                        return a(function () {
                            var r = Array.prototype.slice.call(arguments, 0), r = {shim: this, method: e, args: r, ts: new Date};
                            window._rollbarShims[this.shimId()].messages.push(r);
                        });
                    }(d[p]);
                    r.exports = {setupShim: function (e, n) {
                            if (e) {
                                var t = n.globalAlias || "Rollbar";
                                if ("object" == typeof e[t]) return e[t];
                                e._rollbarShims = {}, e._rollbarWrappedError = null;
                                var o = new c(n);
                                return a(function () {
                                    n.captureUncaught && (o._rollbarOldOnError = e.onerror, i.captureUncaughtExceptions(e, o, true), i.wrapGlobals(e, o, true)), n.captureUnhandledRejections && i.captureUnhandledRejections(e, o, true);
                                    var r = n.autoInstrument;
                                    return false !== n.enabled && (void 0 === r || true === r || "object" == typeof r && r.network) && e.addEventListener && (e.addEventListener("load", o.captureLoad.bind(o)), e.addEventListener("DOMContentLoaded", o.captureDomContentLoaded.bind(o))), e[t] = o;
                                })();
                            }
                        }, Rollbar: c};
                }, function (r, e) {
                    "use strict";
                    r.exports = {captureUncaughtExceptions: function (o, a, r) {
                            if (o) {
                                var i;
                                if ("function" == typeof this._rollbarOldOnError) i = this._rollbarOldOnError; else if (o.onerror) {
                                    for (i = o.onerror; i._rollbarOldOnError;) i = i._rollbarOldOnError;
                                    this._rollbarOldOnError = i;
                                }
                                var e = function () {
                                    var r, e, n, t = Array.prototype.slice.call(arguments, 0);
                                    e = a, n = i, t = t, (r = o)._rollbarWrappedError && (t[4] || (t[4] = r._rollbarWrappedError), t[5] || (t[5] = r._rollbarWrappedError._rollbarContext), r._rollbarWrappedError = null), e.handleUncaughtException.apply(e, t), n && n.apply(r, t);
                                };
                                r && (e._rollbarOldOnError = i), o.onerror = e;
                            }
                        }, captureUnhandledRejections: function (r, o, e) {
                            var n;
                            r && ("function" == typeof r._rollbarURH && r._rollbarURH.belongsToShim && r.removeEventListener("unhandledrejection", r._rollbarURH), (n = function (r) {
                                var e, n, t;
                                try {
                                    e = r.reason;
                                } catch (r) {
                                    e = void 0;
                                }
                                try {
                                    n = r.promise;
                                } catch (r) {
                                    n = "[unhandledrejection] error getting `promise` from event";
                                }
                                try {
                                    t = r.detail, !e && t && (e = t.reason, n = t.promise);
                                } catch (r) {
                                    t = "[unhandledrejection] error getting `detail` from event";
                                }
                                e = e || "[unhandledrejection] error getting `reason` from event", o && o.handleUnhandledRejection && o.handleUnhandledRejection(e, n);
                            }).belongsToShim = e, r._rollbarURH = n, r.addEventListener("unhandledrejection", n));
                        }, wrapGlobals: function (r, e, n) {
                            if (r) for (var t, o = "EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(","), a = 0; a < o.length; ++a) r[t = o[a]] && r[t].prototype && function (t, r, e) {
                                if (r.hasOwnProperty && r.hasOwnProperty("addEventListener")) {
                                    for (var o = r.addEventListener; o._rollbarOldAdd && o.belongsToShim;) o = o._rollbarOldAdd;
                                    var n = function (r, e, n) {
                                        o.call(this, r, t.wrap(e), n);
                                    };
                                    n._rollbarOldAdd = o, n.belongsToShim = e, r.addEventListener = n;
                                    for (var a = r.removeEventListener; this._rollbarOldRemove && this.belongsToShim;) a = this._rollbarOldRemove;
                                    n = function (r, e, n) {
                                        this.call(this, r, e && e._rollbar_wrapped || e, n);
                                    };
                                    n._rollbarOldRemove = a, n.belongsToShim = e, r.removeEventListener = n;
                                }
                            }(e, r[t].prototype, n);
                        }};
                }, function (r, e) {
                    "use strict";
                    function a(r, e) {
                        this.impl = r(e, this), this.options = e;
                        for (var n = this.prototype, t = "log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","), o = 0; o < t.length; o++) n[t[o]] = function (e) {
                            return function () {
                                var r = Array.prototype.slice.call(arguments, 0);
                                if (this.impl[e]) return this.impl[e].apply(this.impl, r);
                            };
                        }(t[o]);
                    }
                    this.prototype._swapAndProcessMessages = function (r, e) {
                        this.impl = r(this.options);
                        for (var n, t, o; n = e.shift();) t = n.method, o = n.args, this[t] && "function" == typeof this[t] && ("captureDomContentLoaded" === t || "captureLoad" === t ? this[t].apply(this, [o[0], n.ts]) : this[t].apply(this, o));
                        return this;
                    }, r.exports = a;
                }, function (r, e) {
                    "use strict";
                    r.exports = function (i) {
                        return function (r) {
                            if (!r && !window._rollbarInitialized) {
                                for (var e, n, r = (i = i || {}).globalAlias || "Rollbar", t = window.rollbar, o = function (r) {
                                    return new t(r);
                                }, a = 0; e = window._rollbarShims[a++];) n = n || e.handler, e.handler._swapAndProcessMessages(o, e.messages);
                                window[r] = n, window._rollbarInitialized = true;
                            }
                        };
                    };
                }], o = {}, i.m = n, i.c = o, i.p = "", i(0)), new window.rollbar({accessToken: e, autoInstrument: false, captureIp: false, captureUncaught: true, captureUnhandledRejections: true, checkIgnore: function (r, e, n) {
                        var n = n && (n.body || n.data), n = n && n.trace, n = n && n.frames, n = n && 0 < n.length && n[n.length - 1];
                        return !("string" == typeof (n = n && n.filename) && 0 <= n.indexOf(t.apiHost));
                    }, enabled: true, payload: {client: {code_version: r, source_map_enabled: true}, environment: t.devEnvironment || 0 <= t.apiHost.indexOf(".vg.learnosity.com/") ? "development" : 0 <= t.apiHost.indexOf(".staging.learnosity.com/") ? "staging" : "production"}, reportLevel: "error", scrubTelemetryInputs: true, transform: function (r) {
                        var r = r && (r.body || r.data), r = r && r.trace, e = r && r.frames;
                        if (e) for (var n = {filename: "<anonymous>", lineno: 0}, t = 0; t < e.length; t++) {
                            var o = e[t];
                            !o || "string" == typeof (o = o.filename) && 0 <= o.indexOf(".learnosity.com/") || e.splice(t, 1, n);
                        }
                    }});
            }
        }
    </script>
</head>
<body>
<h1>Standalone Assessment Example</h1>
<div id="learnosity_assess"></div>
<script>
    const request = "";
    const itemsApp = (new LearnosityItems()).init(request, {
        readyListener() {
            console.log('ready');
        },
        errorListener(err) {
            console.log('error', err);
        }
    })
</script>
</body>
</html>